{% extends "base.html" %}

{% block content %}
<div  id="static-page-content" class="container">
  <div class="row item-ctl">
    <div class="col-md-10">&nbsp;</div>
    <div class="col-md-2" style="text-align: right;">
      &nbsp;
    </div>
  </div>

  <div class="row" style="overflow: auto;">
      <div class="col-md-12"><h1>Generated GovReady-Q app.yaml and template files</h1></div>
    </div>

    <div class="col-md-12">
      {% set component_id = component.id|replace(" ","_")|replace("-","_")|replace(".","_")|replace("[","_")|replace("]","_")|replace("(","_")|replace(")","_")|replace("__","_")|replace(",","_") %}
      <p>
        The following files have been generated at 
        <code>{{ output_dir }}/{{ component_id }}</code>
      </p>

      <p class="warning">WARNING: Underscore replacement is better in actual files and trailing "_" have been removed (e.g., `nist_80053rev4_ssp_CM_2_1_.md`)"</p>

      <div>Directories</div>
      <pre>{{ output_dir }}/{{ component.id }}
{{ output_dir }}/{{ component_id }}/templates
{{ output_dir }}/{{ component_id }}
{{ output_dir }}/{{ component_id }}/assets
</pre>

      <div><code>{{ output_dir }}/{{ component_id }}/app.yaml</code></div>
      <div></div>
      <pre>id: app
title: {{ component.name }}
type: project
version: 0.5
icon: app.png
catalog:
  category: TBD
  vendor: {{ component.project.organization.name }} 
  vendor_url: TBD
  status: stub
  version: 0.2
  source_url: {{ component.source_repository }}
  description:
    short: |
      {{ component.project.organization.name }} {{ component.name }}
  recommended_for:
  - key_short: Org
    value: Small
  - key_short: Tech
    value: Sophisticated
  - key_short: Role
    value: PM
introduction:
  format: markdown
  template: |
    Compliance app for {{ component.project.organization.name }} {{ component.name }}
questions:
- id: overview
  title: Overview
  prompt: |
    Compliance app for {{ component.project.organization.name }} {{ component.name }}
  type: interstitial

output:
{% for ci in controlimpls %}- templates/nist_80053rev4_ssp_{{ ci.control.id|replace(" ","_")|replace("-","_")|replace(".","_")|replace("[","_")|replace("]","_")|replace("(","_")|replace(")","_")|replace("__","_") }}.md
{% endfor %}
</pre>

      <div>Template files</div>
      {% for ci in controlimpls %}
      {% set control_id = ci.control.id|replace(" ","_")|replace("-","_")|replace(".","_")|replace("[","_")|replace("]","_")|replace("(","_")|replace(")","_")|replace("__","_") %}
        <div><code>{{ output_dir }}/{{ component.id }}/templates/nist_80053rev4_ssp_{{ control_id }}.md</code></div>
        <pre>id: nist_80053rev4_ssp_{{ control_id }}
title: NIST 800-53 rev4 SSP {{ control_id }}
format: markdown
...

{{ ci.narrative }}

</pre>
      {% endfor %}
      <!-- <pre>{{ component_yaml }}</pre> -->
    </div>

  </div>
{% endblock %}
